---
title: بروز خطا در فایل crontab
date: 2020-01-22T14:47:51+03:30
categories:
- برنامه‌نویسی
tags:
- آموزش
- لینوکس
draft: true
---

فایل crontab اجازه میده پردازش‌ها و دستورات مشخصی در زمان‌های از پیش تعیین شده اجرا بشوند.

مساله‌ای که من باهاش برخورده بودم بروز خطا در هنگام اجرای کار توسط کرون بود. معمولا به این صورته که در خود دستوری که در فایل کرون قرار داده میشه چگونگی ذخیره خروجی‌ها نیز مشخص میشه. به این طریق که این خروجی‌ها ریدایرکت میشن به هرجایی که مد نظر ماست:

در اینجا دو تا مساله پیش میاد: یک اینکه اگر این کار صورت نگیره خروجی کجا میره؟ دو اینکه اگر خود اجرای دستور به مشکلی بخوره چطور میشه مطلع شد؟

در مورد اول باید گفت که به صورت پیش‌فرض دیمون کرون پس از بروز خطا تلاش میکنه پیام خطا رو از طریق ایمیل به صاحب پردازش ارسال کنه.

در مورد دوم و اینکه خطاها و پیام‌های نوشته شده توسط خود دیمن کرون کجا میره، پاسخ هست /var/log/syslog - البته بسته به اینکه روی چه سیستمی هستید این مکان ممکنه متفاوت هم باشه.

دلایل مختلفی هست که کلا اجرای دستور با مشکل مواجه بشه. موردی که من داشتم تلاش برای نوشتن در پوشه‌ای بود که دسترسی لازم بهش رو نداشتم. در این بین کرون هم هیچ خطایی نمیداد و در سکوت fail میشد.

جالب اینکه بعد از اینکه در مورد موضوع دقیق شدم و سراغ لاگ‌های کرون رفتم، سر ساعتی که باید کار انجام میشد خطای زیر در syslog ثبت شده بود:

```
‍‍‍‍(CRON) info (No MTA installed, discarding output)‍
```

به صورت پیش فرض بر روی اوبونتو MTA (Mail Transfer Agent) نصب نیست. در نتیجه اتفاقی که میقتاد این بود که اجرای دستور با خطا مواجه میشد، سپس زمانی که بروز این خطا هم از طریق ایمیل میخواست گزارش بشه، به دلیل وجود نبود سرویس ایمیل این تسک هم خودش شکست میخورد.

میشه برای رفع این مشکل postfix رو نصب کرد، ولی خب وقتی کار به اینجا رسیده یعنی مشکلات ریشه‌ای‌تری برای حل کردن وجود داره.
